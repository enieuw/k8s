openssl genrsa -out user.key 2048
openssl req -new -key user.key -out user.csr -subj "/CN=user/O=devops"
openssl x509 -req -in user.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out user.crt -days 10000 -extensions v3_ext -extfile csr.conf

kubectl config set-credentials user --client-certificate=/home/core/user.crt --client-key=/home/core/user.key
kubectl config set-context user --cluster=myfirstcluster-secure --user=user
kubectl config use-context user
kubectl get pods

kubectl config use-context secure
kubectl apply -f role.yml
kubectl apply -f role-binding.yml
kubectl config use-context user
